import{K as $,u as N,r as _,o as j,s as D,g as y,a as r,c as u,h as v,d as l,i as h,b as t,w as m,t as d,f as p,E as U,H as V,j as C,F as L,l as B}from"./index.js";import{e as w}from"./EventBus.js";const P={class:"container position-relative"},R={key:0,class:"row justify-content-center pt-lg-5 pt-3"},S={class:"col-md-5 col-md-5 col-8"},E=["src"],F={class:"col-lg-4 col-md-7 col-12 p-3"},H={"aria-label":"breadcrumb"},M={class:"breadcrumb"},z={class:"breadcrumb-item text-brown px-1"},K={class:"breadcrumb-item text-brown px-1"},Q={class:"breadcrumb-item text-brown px-1 active","aria-current":"page"},q={class:"d-flex align-items-center"},A={class:"h5 m-0 ms-3 badge rounded-pill text-gold bg-brown py-2 px-3"},G=t("hr",null,null,-1),I={class:"d-flex my-2"},J={class:"col-auto text-danger h4 me-3 fw-bold"},O={class:"col-auto text-decoration-line-through text-secondary"},W={class:"d-flex flex-wrap justify-content-round mb-4"},X=t("div",{class:"col-12 p"}," 數量 ",-1),Y={scope:"",class:"col-12 d-flex"},Z=["disabled"],tt={class:"d-flex justify-content-between"},et={class:"col-6 px-1"},ot=["disabled"],st={key:0,class:"fas fa-spinner fa-spin"},at=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),nt={class:"col-6 px-1"},lt={key:0,class:"fas fa-spinner fa-spin"},it=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),ct={key:1,class:"row justify-content-center align-items-center text-center py-5"},dt=t("h1",null,"404",-1),rt=t("p",null,"頁面不存在，5秒後自動跳轉回首頁",-1),ut=[dt,rt],ht={__name:"products_page",setup(pt){const f=$(),k=N(),o=_({});let c=_(!1),i=_({productLoading:"",productChangeToCart:""}),s=_(1);function g(a){i.value.productChangeToCart=a,w.emit("cart:change",[a,s.value])}function x(){c.value=!0;const a=`https://vue-course-api.hexschool.io/api/ozeu/product/${f.params.id}`;B.get(a).then(e=>{e.data.success?(o.value=e.data.product,c.value=!1):(c.value=!1,o.value=null,setTimeout(function(){k.replace({path:"/"})},5e3))})}return j(a=>{x(),w.on("cart:success",e=>{e&&(i.value.productChangeToCart="")})}),D(()=>f.path,(a,e)=>{x()}),(a,e)=>{const T=y("loading"),b=y("router-link");return r(),u(L,null,[v(T,{active:l(c),"onUpdate:active":e[0]||(e[0]=n=>h(c)?c.value=n:c=n)},null,8,["active"]),t("div",P,[o.value?(r(),u("div",R,[t("div",S,[t("img",{src:o.value.imageUrl,class:"img-fluid"},null,8,E)]),t("div",F,[t("nav",H,[t("ol",M,[t("li",z,[v(b,{to:"/"},{default:m(()=>[p("Home")]),_:1})]),t("li",K,[v(b,{to:"/shopping"},{default:m(()=>[p("產品資訊")]),_:1})]),t("li",Q,d(o.value.title),1)])]),t("h3",q,[p(d(o.value.title)+" ",1),t("span",A,d(o.value.category),1)]),t("p",null,d(o.value.content),1),t("p",null,d(o.value.description),1),G,t("div",I,[t("div",J,"NT$"+d(a.$currency.currencyUSD(o.value.price)),1),t("div",O,"NT$"+d(a.$currency.currencyUSD(o.value.origin_price)),1)]),t("div",W,[X,t("div",Y,[t("button",{type:"button",class:"btn btn-outline-brown rounded-0 rounded-start",disabled:l(s)<=1,onClick:e[1]||(e[1]=n=>h(s)?s.value--:s--)},"-",8,Z),U(t("input",{type:"txt",class:"form-control rounded-0 text-center border-brown","onUpdate:modelValue":e[2]||(e[2]=n=>h(s)?s.value=n:s=n)},null,512),[[V,l(s)]]),t("button",{type:"button",class:"btn btn-outline-brown rounded-0 rounded-end",onClick:e[3]||(e[3]=n=>h(s)?s.value++:s++)},"+")])]),t("div",tt,[t("div",et,[t("button",{type:"button",class:"btn btn-gold btn-sm ml-auto w-100 p-2",disabled:l(i).productChangeToCart||l(i).productLoading==o.value.id,onClick:e[4]||(e[4]=n=>g(o.value.id))},[l(i).productChangeToCart==o.value.id?(r(),u("i",st)):C("",!0),at,p(" 加入購物車 ")],8,ot)]),t("div",nt,[v(b,{to:"/check/cart",type:"button",class:"btn btn-danger btn-sm ml-auto w-100 p-2",disabled:l(i).productChangeToCart||l(i).productLoading==o.value.id,onClick:e[5]||(e[5]=n=>g(o.value.id))},{default:m(()=>[l(i).productChangeToCart==o.value.id?(r(),u("i",lt)):C("",!0),it,p(" 直接購買 ")]),_:1},8,["disabled"])])])])])):(r(),u("div",ct,ut))])],64)}}};export{ht as default};
