import{I as $,u as V,d as _,o as P,q as S,e as y,a as r,c as u,f as v,g as l,i as h,b as t,w as m,t as c,h as p,B as U,D as E,j as C,F as N,l as R}from"./index.js";import{e as w}from"./EventBus.js";var T={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const j={class:"container position-relative"},B={key:0,class:"row justify-content-center pt-lg-5 pt-3"},L={class:"col-md-5 col-md-5 col-8"},A=["src"],I={class:"col-lg-4 col-md-7 col-12 p-3"},M={"aria-label":"breadcrumb"},H={class:"breadcrumb"},O={class:"breadcrumb-item text-brown px-1"},F={class:"breadcrumb-item text-brown px-1"},q={class:"breadcrumb-item text-brown px-1 active","aria-current":"page"},Q={class:"d-flex align-items-center"},z={class:"h5 m-0 ms-3 badge text-gold bg-brown py-1 px-2"},G=t("hr",null,null,-1),J={class:"d-flex my-2"},K={class:"col-auto text-danger h4 me-3 fw-bold"},W={class:"col-auto text-decoration-line-through text-secondary"},X={class:"d-flex flex-wrap justify-content-round mb-4"},Y=t("div",{class:"col-12 p"}," 數量 ",-1),Z={scope:"",class:"col-12 d-flex"},tt=["disabled"],et={class:"d-flex justify-content-between"},ot={class:"col-6 px-1"},st=["disabled"],at={key:0,class:"fas fa-spinner fa-spin"},nt=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),lt={class:"col-6 px-1"},it={key:0,class:"fas fa-spinner fa-spin"},dt=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),ct={key:1,class:"row justify-content-center align-items-center text-center py-5"},rt=t("h1",null,"404",-1),ut=t("p",null,"頁面不存在，5秒後自動跳轉回首頁",-1),pt=[rt,ut],bt={__name:"products_page",setup(_t){const f=$(),k=V(),o=_({});let d=_(!1),i=_({productLoading:"",productChangeToCart:""}),s=_(1);function g(a){i.value.productChangeToCart=a,w.emit("cart:change",[a,s.value])}function x(){d.value=!0;const a=`${T.VITE_APIPATH}/api/${T.VITE_CUSTOMPATH}/product/${f.params.id}`;R.get(a).then(e=>{e.data.success?(o.value=e.data.product,d.value=!1):(d.value=!1,o.value=null,setTimeout(function(){k.replace({path:"/"})},5e3))})}return P(a=>{x(),w.on("cart:success",e=>{e&&(i.value.productChangeToCart="")})}),S(()=>f.path,(a,e)=>{x()}),(a,e)=>{const D=y("loading"),b=y("router-link");return r(),u(N,null,[v(D,{active:l(d),"onUpdate:active":e[0]||(e[0]=n=>h(d)?d.value=n:d=n)},null,8,["active"]),t("div",j,[o.value?(r(),u("div",B,[t("div",L,[t("img",{src:o.value.imageUrl,class:"img-fluid"},null,8,A)]),t("div",I,[t("nav",M,[t("ol",H,[t("li",O,[v(b,{to:"/"},{default:m(()=>[p("Home")]),_:1})]),t("li",F,[v(b,{to:"/shopping"},{default:m(()=>[p("產品資訊")]),_:1})]),t("li",q,c(o.value.title),1)])]),t("h3",Q,[p(c(o.value.title)+" ",1),t("span",z,c(o.value.category),1)]),t("p",null,c(o.value.content),1),t("p",null,c(o.value.description),1),G,t("div",J,[t("div",K,"NT$"+c(a.$currency.currencyUSD(o.value.price)),1),t("div",W,"NT$"+c(a.$currency.currencyUSD(o.value.origin_price)),1)]),t("div",X,[Y,t("div",Z,[t("button",{type:"button",class:"btn btn-outline-brown rounded-0 rounded-start",disabled:l(s)<=1,onClick:e[1]||(e[1]=n=>h(s)?s.value--:s--)},"-",8,tt),U(t("input",{type:"txt",class:"form-control rounded-0 text-center border-brown","onUpdate:modelValue":e[2]||(e[2]=n=>h(s)?s.value=n:s=n)},null,512),[[E,l(s)]]),t("button",{type:"button",class:"btn btn-outline-brown rounded-0 rounded-end",onClick:e[3]||(e[3]=n=>h(s)?s.value++:s++)},"+")])]),t("div",et,[t("div",ot,[t("button",{type:"button",class:"btn btn-gold btn-sm ml-auto w-100 p-2",disabled:l(i).productChangeToCart||l(i).productLoading==o.value.id,onClick:e[4]||(e[4]=n=>g(o.value.id))},[l(i).productChangeToCart==o.value.id?(r(),u("i",at)):C("",!0),nt,p(" 加入購物車 ")],8,st)]),t("div",lt,[v(b,{to:"/check/cart",type:"button",class:"btn btn-danger btn-sm ml-auto w-100 p-2",disabled:l(i).productChangeToCart||l(i).productLoading==o.value.id,onClick:e[5]||(e[5]=n=>g(o.value.id))},{default:m(()=>[l(i).productChangeToCart==o.value.id?(r(),u("i",it)):C("",!0),dt,p(" 直接購買 ")]),_:1},8,["disabled"])])])])])):(r(),u("div",ct,pt))])],64)}}};export{bt as default};
