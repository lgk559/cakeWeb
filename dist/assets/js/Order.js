import{u as y,d as i,o as k,e as E,a,c as s,b as e,f as V,g as b,i as D,F as d,k as g,l as O,t as n,j as R}from"./index.js";import{e as u}from"./EventBus.js";var v={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const S={class:"vl-parent"},T={key:0,class:"table table-striped"},A=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"購買時間"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"購買款項"),e("th",{scope:"col"},"應付金額"),e("th",{scope:"col"},"是否付款")])],-1),B={scope:"row"},P={key:0,class:"text-success"},w={key:1},x={key:1,class:"container-fluid"},C=e("div",{class:"row"},[e("div",{class:"col"},[e("p",{class:"fs-2"},"尚無訂單")])],-1),I=[C],U={__name:"Order",setup(L){const f=y();let l=i(!1);const r=i([]),p=i();function _(){const c=`${v.VITE_APIPATH}/api/${v.VITE_CUSTOMPATH}/admin/orders`;l.value=!0,O.get(c).then(o=>{console.log(o.data),o.data.success?(p.value=o.data.pagination,u.emit("pagination:init",p.value),l.value=!1,r.value=o.data.orders):(u.emit("messagepush","需登入","warning"),f.replace("/"))})}return k(()=>{_(),u.on("pagination:chage",c=>{_()})}),(c,o)=>{const m=E("loading");return a(),s("div",null,[e("div",S,[V(m,{active:b(l),"onUpdate:active":o[0]||(o[0]=t=>D(l)?l.value=t:l=t)},null,8,["active"])]),r.value.length>0?(a(),s("table",T,[A,e("tbody",null,[(a(!0),s(d,null,g(r.value,t=>(a(),s("tr",{key:t.id},[t.user?(a(),s(d,{key:0},[e("th",B,n(t.num),1),e("td",null,n(c.$mydata.getData(t.create_at)),1),e("td",null,n(t.user.email),1),e("td",null,[e("ul",null,[(a(!0),s(d,null,g(t.products,h=>(a(),s("li",null,n(h.product.title)+" 數量："+n(h.qty),1))),256))])]),e("td",null,n(t.total),1),e("td",null,[t.is_paid?(a(),s("span",P,"已付款")):(a(),s("span",w,"未付"))])],64)):R("",!0)]))),128))])])):(a(),s("div",x,I))])}}};export{U as default};
