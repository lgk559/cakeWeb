import{u as m,r as i,o as y,g as k,a,c as s,b as e,h as b,d as x,i as w,F as u,k as g,l as B,t as n,j as N}from"./index.js";import{e as d}from"./EventBus.js";const V={class:"vl-parent"},C={key:0,class:"table table-striped"},D=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"購買時間"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"購買款項"),e("th",{scope:"col"},"應付金額"),e("th",{scope:"col"},"是否付款")])],-1),E={scope:"row"},F={key:0,class:"text-success"},L={key:1},O={key:1,class:"container-fluid"},R=e("div",{class:"row"},[e("div",{class:"col"},[e("p",{class:"fs-2"},"尚無訂單")])],-1),$=[R],M={__name:"Order",setup(j){const v=m();let l=i(!1);const r=i([]),p=i();function _(){const c="https://vue-course-api.hexschool.io/api/ozeu/admin/orders";l.value=!0,B.get(c).then(o=>{console.log(o.data),o.data.success?(p.value=o.data.pagination,d.emit("pagination:init",p.value),l.value=!1,r.value=o.data.orders):(d.emit("messagepush","需登入","warning"),v.replace("/"))})}return y(()=>{_(),d.on("pagination:chage",c=>{_()})}),(c,o)=>{const f=k("loading");return a(),s("div",null,[e("div",V,[b(f,{active:x(l),"onUpdate:active":o[0]||(o[0]=t=>w(l)?l.value=t:l=t)},null,8,["active"])]),r.value.length>0?(a(),s("table",C,[D,e("tbody",null,[(a(!0),s(u,null,g(r.value,t=>(a(),s("tr",{key:t.id},[t.user?(a(),s(u,{key:0},[e("th",E,n(t.num),1),e("td",null,n(c.$mydata.getData(t.create_at)),1),e("td",null,n(t.user.email),1),e("td",null,[e("ul",null,[(a(!0),s(u,null,g(t.products,h=>(a(),s("li",null,n(h.product.title)+" 數量："+n(h.qty),1))),256))])]),e("td",null,n(t.total),1),e("td",null,[t.is_paid?(a(),s("span",F,"已付款")):(a(),s("span",L,"未付"))])],64)):N("",!0)]))),128))])])):(a(),s("div",O,$))])}}};export{M as default};
