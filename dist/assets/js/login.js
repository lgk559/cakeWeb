import{u as E,d as l,m as R,o as D,a as c,c as u,b as e,B as p,D as B,A as _,j as m,L as I,E as A,l as L}from"./index.js";var b={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const C={id:"login",class:"loginBox"},V={class:"login"},$=e("h1",{class:"t-center"},"黑皮購物廠商登入",-1),z={class:"main t-center"},M={class:"item_account"},T=e("span",{class:"input_title"},"帳號",-1),F={key:0,class:"failureInfo"},S={class:"item_password"},O=e("span",{class:"input_title"},"密碼",-1),P=["type"],U=["src"],j={key:0,class:"failureInfo"},N={__name:"login",emits:["change"],setup(G,{emit:v}){const f=v,g=E();l(!1);const s=l({username:"",password:""}),n=l({account:!0,password:!0}),i=l(!0),r=l({password:"/assets/images/visibility_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg",txt:"/assets/images/visibility_off_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg"});function w(){if(s.value.account=="")return!0;{let o=new RegExp(/^[^@\s]+@[^@\s]+\.[^@\s]+$/);n.value.account=!!o.test(s.value.username)}}function h(){let o=new RegExp(/^([a-zA-Z0-9]{6,15}|0\d+)$/);n.value.password=!!o.test(s.value.password)}function d(){const o=`${b.VITE_APIPATH}/admin/signin`,t={...s.value};L.post(o,t).then(a=>{const y=a.data.token,k=a.data.expired;document.cookie=`hexToken=${y}; expires=${new Date(k)}`,g.push("/admin/products")})}function x(){f("change",!1)}return R(()=>{}),D(o=>{}),(o,t)=>(c(),u("div",C,[e("div",V,[$,e("div",z,[e("div",M,[T,p(e("input",{id:"account",type:"text",class:_(["form-control",{failure:!n.value.account}]),placeholder:"請輸入電子信箱","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.username=a),onBlur:w},null,34),[[B,s.value.username]]),n.value.account?m("",!0):(c(),u("span",F,"請輸入正確"))]),e("div",S,[O,p(e("input",{id:"password",class:_(["form-control",{failure:!n.value.password}]),placeholder:"請輸入6~15英數組成的密碼",size:"33",maxlength:"15",type:i.value?"password":"text","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.password=a),onBlur:h,onKeyup:A(d,["enter"])},null,42,P),[[I,s.value.password]]),e("span",{class:"eye",onClick:t[2]||(t[2]=a=>i.value=!i.value)},[e("img",{src:i.value?r.value.password:r.value.txt,alt:""},null,8,U)]),n.value.password?m("",!0):(c(),u("span",j,"不可包含符號、長度需6字元以上"))])]),e("button",{class:"p-r-center",onClick:d},"登入"),e("button",{class:"close",onClick:x}," X ")])]))}};export{N as default};
