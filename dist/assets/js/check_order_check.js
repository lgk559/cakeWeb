import{u as q,r as i,o as F,g as b,a as m,c as _,b as e,F as N,k as S,t as r,h as a,w as y,l as T,n as M,d,f as w,D as f,E as g,i as x,j as k,G as $}from"./index.js";import{e as C}from"./EventBus.js";import{T as B}from"./bootstrap.esm.js";const L={class:"check_order_check d-flex flex-wrap"},R={class:"col-12 px-md-5 px-3"},z={class:"check_orderCart"},A=e("li",{class:"border-0"},[e("div",{class:"check_orderCart-header py-2 border-bottom bg-brown text-gold"}," 訂購確認 ")],-1),G={key:"item.id",class:"d-flex align-items-center flex-wrap p-md-3 p-2"},H={class:"col-auto img"},I=["src"],J={class:"col-12 p omit-1 w-100 px-md-5 px-3 py-md-3 py-2"},K={class:"info d-flex align-items-center flex-wrap px-md-5 px-md-0 ps-2"},P={class:"col-md-auto col-5"},Q={class:"col-md-auto col-7 ps-md-3 ps-0"},W={class:"col-md-auto col-7 ms-md-0 ms-auto ps-md-3 ps-0"},X={class:"d-flex flex-wrap justify-content-center p-2 bg-brown text-gold"},Y=e("div",{class:"col-md-7 col-12 d-flex align-items-center"},[e("span",{class:"col-auto me-3"},"優惠券")],-1),Z={class:"col-md-7 col-12 d-flex py-2"},ee={class:"col-6 d-flex flex-wrap flex-grow-1"},oe={class:"col-md-6 col-12"},se={class:"col-md-6 col-12"},te={class:"col-12 px-md-5 px-2"},le=e("div",{class:"check_orderCart-header py-2 border-bottom bg-brown text-gold"}," 填寫資料&付款方式 ",-1),ae=e("p",{class:"fw-bold mt-3 mb-2"},"聯絡資料",-1),ce={class:"check_order-form d-flex justify-content-center"},de={class:"col-12 p-3"},re={class:"form-group mb-3"},ne=e("label",{for:"useremail"},"Email",-1),ie={class:"form-group mb-3"},ue=e("label",{for:"username"},"收件人姓名",-1),me={class:"form-group mb-3"},_e=e("label",{for:"usertel"},"收件人電話",-1),pe={class:"form-group"},fe=e("label",{for:"useraddress"},"收件人地址",-1),he=e("p",{class:"fw-bold mt-3 mb-2"},"付款方式",-1),ve={class:"check_order-pay d-flex justify-content-center p-3"},be={class:"d-flex flex-wrap flex-grow-1 justify-content-start mb-3"},ge={class:"col-auto btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},xe={class:"dropdown-menu p-3"},ye={class:"dropdown-item my-1"},ke={class:"form-check"},we=e("label",{class:"form-check-label w-100",for:"'credit'"},"信用卡",-1),Ve={class:"dropdown-item my-1"},Ce={class:"form-check"},Ue=e("label",{class:"form-check-label w-100",for:"'bank'"},"銀行轉帳",-1),De={class:"dropdown-item my-1"},je={class:"form-check"},Ee=e("label",{class:"form-check-label w-100",for:"'cashOnDelivery'"},"貨到付款",-1),Oe={key:0,class:"col-md col-12 flex-grow-1"},qe=e("ul",{class:"p-md-0 pt-3"},[e("li",{class:"d-flex mb-3","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"此為範例示意，還未串接金流"},[e("div",{class:"col-1 d-flex justify-content-center align-items-center"},[e("input",{class:"form-check-input",type:"radio",name:"",id:"card1",value:"520",checked:""})]),e("div",{class:"col-11 d-flex border"},[e("label",{class:"col-12 d-flex flex-wrap align-item-center p-1",for:"card1"},[w(" 卡號： "),e("span",null,"4311-9511-1111-1111")])])])],-1),Fe=[qe],Ne={key:1,class:"col-md col-12 flex-grow-1 ms-3"},Se=e("div",{class:"col-11 d-flex border"},[e("div",{class:"col-12 d-flex flex-wrap align-item-center p-1"},[e("div",{class:"bankName me-3"},"台灣銀行"),e("div",{class:"bankAccout"},"111000222255888")])],-1),Te=[Se],Me=e("p",{class:"fw-bold mt-3 mb-2"},"配送方式",-1),$e={class:"check_order-deliver d-flex justify-content-center p-3"},Be={class:"input-group mb-3"},Le={class:"btn btn-outline-secondary dropdown-toggle rounded",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Re={class:"dropdown-menu p-3"},ze={class:"form-check"},Ae=e("label",{class:"form-check-label w-100",for:"'home'"},"宅配",-1),Ge={key:0,class:"col-md col-12 flex-grow-1 ms-3","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"此為範例示意，還未串接物流"},He=e("div",{class:"col-11 d-flex border"},[e("div",{class:"col-12 d-flex flex-wrap align-item-center p-1"},[e("div",{class:"bankName me-3"},"黑貓宅急便"),e("div",{class:"bankAccout"},"低溫配送")])],-1),Ie=[He],Je=e("p",{class:"fw-bold mt-3 mb-2"},"備註",-1),Ke={class:"check_order-deliver d-flex justify-content-center p-3"},Pe={class:"col-12 p-1"},Qe={class:"d-flex justify-content-around mt-4"},We=e("button",{class:"col-5 btn btn-brown text-gold",type:"submit"},"送出訂單",-1),oo={__name:"check_order_check",setup(Xe){const U=q(),p=i({});let D=i(0);const l=i({user:{name:"",email:"",tel:"",address:""},message:""});let t=i("信用卡"),u=i("宅配");i(!1);let j=i({productLoading:"",productChangeToCart:""});function V(){C.emit("cart:init")}function E(c){if(console.log("payOrder"),c){const s="https://vue-course-api.hexschool.io/api/ozeu/order";let h=Object.assign({},l.value);console.log(h),T.post(s,{data:l.value}).then(n=>{console.log(n.data),n.data.success&&(V(),l.value={},U.replace({path:"/check/order_finish"}))})}else console.log("this field is required")}return F(()=>{new B(document.body,{selector:"[data-bs-toggle='tooltip']"}),C.on("cart:returndata",c=>{p.value=c,D.value=c.carts.length}),V()}),(c,s)=>{const h=b("router-link"),n=b("VField"),v=b("ErrorMessage"),O=b("VForm");return m(),_("div",L,[e("div",R,[e("ul",z,[A,(m(!0),_(N,null,S(p.value.carts,o=>(m(),_("li",G,[e("div",H,[e("img",{class:"img-fluid",src:o.product.imageUrl,alt:""},null,8,I)]),e("div",{class:M(["col d-flex flex-wrap side-right",{active:o.id==d(j).productChangeToCart}])},[e("div",J,[a(h,{class:"text-brown",to:`/page/${o.product.id}`,onClick:c.closeCart},{default:y(()=>[w(r(o.product.title),1)]),_:2},1032,["to","onClick"])]),e("ul",K,[e("li",P," 數量："+r(o.qty),1),e("li",Q," 單價："+r(c.$currency.currencyUSD(o.product.price)),1),e("li",W," 小計："+r(c.$currency.currencyUSD(o.total)),1)])],2)]))),128)),e("li",null,[e("div",X,[Y,e("div",Z,[e("div",ee,[e("div",oe," 折扣：- "+r(c.$currency.currencyUSD(p.value.total-p.value.final_total)),1),e("div",se," 需付金額： "+r(c.$currency.currencyUSD(p.value.final_total)),1)])])])])])]),e("div",te,[le,ae,a(O,{ref:"form_payOrder",onSubmit:E},{default:y(()=>[e("div",ce,[e("div",de,[e("div",re,[ne,a(n,{type:"email",class:"form-control mt-1",name:"Email",id:"useremail",modelValue:l.value.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.user.email=o),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue"]),a(v,{name:"Email",class:"text-danger"})]),e("div",ie,[ue,a(n,{type:"text",class:"form-control mt-1",name:"姓名",id:"username",modelValue:l.value.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.user.name=o),placeholder:"輸入姓名",rules:"required"},null,8,["modelValue"]),a(v,{name:"姓名",class:"text-danger"})]),e("div",me,[_e,a(n,{type:"tel",class:"form-control mt-1",name:"電話",id:"usertel",modelValue:l.value.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.user.tel=o),placeholder:"請輸入電話",rules:{regex:/^[0-9]+$/,required:!0,min:10}},null,8,["modelValue"]),a(v,{name:"電話",class:"text-danger"})]),e("div",pe,[fe,a(n,{type:"text",class:"form-control mt-1 mb-3",name:"地址",id:"useraddress",modelValue:l.value.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.user.address=o),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue"]),a(v,{name:"地址",class:"text-danger"})])])]),he,e("div",ve,[e("div",be,[e("button",ge,r(d(t)||"選擇付款方式"),1),e("ul",xe,[e("li",ye,[e("div",ke,[f(e("input",{class:"form-check-input",type:"radio",name:"credit",id:"'credit'",value:"信用卡","onUpdate:modelValue":s[4]||(s[4]=o=>x(t)?t.value=o:t=o)},null,512),[[g,d(t)]]),we])]),e("li",Ve,[e("div",Ce,[f(e("input",{class:"form-check-input",type:"radio",name:"bank",id:"'bank'",value:"銀行轉帳","onUpdate:modelValue":s[5]||(s[5]=o=>x(t)?t.value=o:t=o)},null,512),[[g,d(t)]]),Ue])]),e("li",De,[e("div",je,[f(e("input",{class:"form-check-input",type:"radio",name:"cashOnDelivery",id:"'cashOnDelivery'",value:"貨到付款","onUpdate:modelValue":s[6]||(s[6]=o=>x(t)?t.value=o:t=o)},null,512),[[g,d(t)]]),Ee])])]),d(t)=="信用卡"?(m(),_("div",Oe,Fe)):k("",!0),d(t)=="銀行轉帳"?(m(),_("div",Ne,Te)):k("",!0)])]),Me,e("div",$e,[e("div",Be,[e("button",Le,r(d(u)||"選擇配送方式"),1),e("ul",Re,[e("li",null,[e("div",ze,[f(e("input",{class:"form-check-input",type:"radio",name:"home",id:"'home'",value:"宅配","onUpdate:modelValue":s[7]||(s[7]=o=>x(u)?u.value=o:u=o)},null,512),[[g,d(u)]]),Ae])])]),d(u)=="宅配"?(m(),_("div",Ge,Ie)):k("",!0)])]),Je,e("div",Ke,[e("div",Pe,[f(e("textarea",{name:"",id:"comment",class:"form-control",cols:"30",rows:"2","onUpdate:modelValue":s[8]||(s[8]=o=>l.value.message=o)},null,512),[[$,l.value.message]])])]),e("div",Qe,[a(h,{to:"/check/order_cart",class:"col-5 btn btn-outline-secondary me-md-5 me-0"},{default:y(()=>[w("修改訂單")]),_:1}),We])]),_:1},512)])])}}};export{oo as default};
