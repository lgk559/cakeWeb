import{u as S,d as i,o as A,e as b,a as m,c as _,b as e,F as M,k as q,t as r,f as a,w as y,l as F,A as N,g as c,h as w,B as f,C as g,i as x,j as k,D as R}from"./index.js";import{e as C}from"./EventBus.js";import{T as B}from"./bootstrap.esm.js";var U={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const L={class:"check_order_check d-flex flex-wrap"},P={class:"col-12 px-md-5 px-2"},$={class:"check_orderCart"},I=e("li",null,[e("div",{class:"check_orderCart-header py-2 border-bottom bg-brown text-gold"}," 訂購確認 ")],-1),H={key:"item.id",class:"d-flex align-items-center flex-wrap p-md-3 p-2"},z={class:"col-auto img"},G=["src"],J={class:"col-12 p omit-1 w-100 px-md-5 px-3 py-md-3 py-2"},K={class:"info d-flex align-items-center flex-wrap px-md-5 px-md-0 px-2"},Q={class:"col-md-auto col-5"},W={class:"col-md-auto col-7 ps-md-3 ps-0"},X={class:"col-md-auto col-7 ms-md-0 ms-auto ps-md-3 ps-0"},Y={class:"d-flex flex-wrap justify-content-center p-2 bg-brown text-gold"},Z=e("div",{class:"col-md-7 col-12 d-flex align-items-center"},[e("span",{class:"col-auto me-3"},"優惠券")],-1),ee={class:"col-md-7 col-12 d-flex py-2"},oe={class:"col-6 d-flex flex-wrap flex-grow-1"},se={class:"col-md-6 col-12"},te={class:"col-md-6 col-12"},le={class:"col-12 px-md-5 px-2"},ae=e("div",{class:"check_orderCart-header py-2 border-bottom bg-brown text-gold"}," 填寫資料&付款方式 ",-1),de=e("p",{class:"fw-bold mt-3 mb-2"},"聯絡資料",-1),ce={class:"check_order-form d-flex justify-content-center"},re={class:"col-12 p-3"},ne={class:"form-group mb-3"},ie=e("label",{for:"useremail"},"Email",-1),ue={class:"form-group mb-3"},me=e("label",{for:"username"},"收件人姓名",-1),_e={class:"form-group mb-3"},pe=e("label",{for:"usertel"},"收件人電話",-1),fe={class:"form-group"},he=e("label",{for:"useraddress"},"收件人地址",-1),ve=e("p",{class:"fw-bold mt-3 mb-2"},"付款方式",-1),be={class:"check_order-pay d-flex justify-content-center p-3"},ge={class:"d-flex flex-wrap flex-grow-1 justify-content-start mb-3"},xe={class:"col-auto btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ye={class:"dropdown-menu p-3"},ke={class:"dropdown-item my-1"},we={class:"form-check"},Ve=e("label",{class:"form-check-label w-100",for:"'credit'"},"信用卡",-1),Ce={class:"dropdown-item my-1"},Ue={class:"form-check"},De=e("label",{class:"form-check-label w-100",for:"'bank'"},"銀行轉帳",-1),je={class:"dropdown-item my-1"},Oe={class:"form-check"},Te=e("label",{class:"form-check-label w-100",for:"'cashOnDelivery'"},"貨到付款",-1),Ee={key:0,class:"col-md col-12 flex-grow-1"},Se=e("ul",{class:"dropdown-menu0 p-1"},[e("li",{class:"d-flex mb-3","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"此為範例示意，還未串接金流"},[e("div",{class:"col-1 d-flex justify-content-center align-item-center"},[e("input",{type:"radio",name:"",id:"card1",value:"520",checked:""})]),e("div",{class:"col-11 d-flex border"},[e("label",{class:"col-12 d-flex flex-wrap align-item-center p-1",for:"card1"},[w(" 卡號： "),e("span",null,"4311-9511-1111-1111")])])])],-1),Ae=[Se],Me={key:1,class:"col-md col-12 flex-grow-1 ms-3"},qe=e("div",{class:"d-flex mb-3 p-1"},[e("div",{class:"bankName me-3"},"台灣銀行"),e("div",{class:"bankAccout"},"111000222255888")],-1),Fe=[qe],Ne=e("p",{class:"fw-bold mt-3 mb-2"},"配送方式",-1),Re={class:"check_order-deliver d-flex justify-content-center p-3"},Be={class:"input-group mb-3"},Le={class:"btn btn-outline-secondary dropdown-toggle rounded",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Pe={class:"dropdown-menu p-3"},$e={class:"form-check"},Ie=e("label",{class:"form-check-label w-100",for:"'home'"},"宅配",-1),He={key:0,class:"col-md col-12 flex-grow-1 ms-3","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"此為範例示意，還未串接物流"},ze=e("div",{class:"d-flex mb-3 p-1"},[e("div",{class:"bankName me-3"},"黑貓宅急便"),e("div",{class:"bankAccout"},"低溫配送")],-1),Ge=[ze],Je=e("p",{class:"fw-bold mt-3 mb-2"},"備註",-1),Ke={class:"check_order-deliver d-flex justify-content-center p-3"},Qe={class:"col-12 p-1"},We={class:"d-flex justify-content-md-end justify-content-center mt-4"},Xe=e("button",{class:"btn btn-brown text-gold",type:"submit"},"送出訂單",-1),so={__name:"check_order_check",setup(Ye){const D=S(),p=i({});let j=i(0);const l=i({user:{name:"",email:"",tel:"",address:""},message:""});let t=i("信用卡"),u=i("宅配");i(!1);let O=i({productLoading:"",productChangeToCart:""});function V(){C.emit("cart:init")}function T(d){if(console.log("payOrder"),d){const s=`${U.VITE_APIPATH}/api/${U.VITE_CUSTOMPATH}/order`;let h=Object.assign({},l.value);console.log(h),F.post(s,{data:l.value}).then(n=>{console.log(n.data),n.data.success&&(V(),l.value={},D.replace({path:"/check/order_finish"}))})}else console.log("this field is required")}return A(()=>{new B(document.body,{selector:"[data-bs-toggle='tooltip']"}),C.on("cart:returndata",d=>{p.value=d,j.value=d.carts.length}),V()}),(d,s)=>{const h=b("router-link"),n=b("VField"),v=b("ErrorMessage"),E=b("VForm");return m(),_("div",L,[e("div",P,[e("ul",$,[I,(m(!0),_(M,null,q(p.value.carts,o=>(m(),_("li",H,[e("div",z,[e("img",{class:"img-fluid",src:o.product.imageUrl,alt:""},null,8,G)]),e("div",{class:N(["col d-flex flex-wrap side-right",{active:o.id==c(O).productChangeToCart}])},[e("div",J,[a(h,{class:"text-brown",to:`/page/${o.product.id}`,onClick:d.closeCart},{default:y(()=>[w(r(o.product.title),1)]),_:2},1032,["to","onClick"])]),e("ul",K,[e("li",Q," 數量："+r(o.qty),1),e("li",W," 單價："+r(d.$currency.currencyUSD(o.product.price)),1),e("li",X," 小計："+r(d.$currency.currencyUSD(o.total)),1)])],2)]))),128)),e("li",null,[e("div",Y,[Z,e("div",ee,[e("div",oe,[e("div",se," 折扣：- "+r(d.$currency.currencyUSD(p.value.total-p.value.final_total)),1),e("div",te," 需付金額： "+r(d.$currency.currencyUSD(p.value.final_total)),1)])])])])])]),e("div",le,[ae,de,a(E,{ref:"form_payOrder",onSubmit:T},{default:y(()=>[e("div",ce,[e("div",re,[e("div",ne,[ie,a(n,{type:"email",class:"form-control mt-1",name:"email",id:"useremail",modelValue:l.value.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.user.email=o),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue"]),a(v,{name:"email",class:"text-danger"})]),e("div",ue,[me,a(n,{type:"text",class:"form-control mt-1",name:"姓名",id:"username",modelValue:l.value.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.user.name=o),placeholder:"輸入姓名",rules:"required"},null,8,["modelValue"]),a(v,{name:"姓名",class:"text-danger"})]),e("div",_e,[pe,a(n,{type:"tel",class:"form-control mt-1",name:"電話",id:"usertel",modelValue:l.value.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.user.tel=o),placeholder:"請輸入電話",rules:{regex:/^[0-9]+$/,required:!0,min:10}},null,8,["modelValue"]),a(v,{name:"電話",class:"text-danger"})]),e("div",fe,[he,a(n,{type:"text",class:"form-control mt-1 mb-3",name:"地址",id:"useraddress",modelValue:l.value.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.user.address=o),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue"]),a(v,{name:"地址",class:"text-danger"})])])]),ve,e("div",be,[e("div",ge,[e("button",xe,r(c(t)||"選擇付款方式"),1),e("ul",ye,[e("li",ke,[e("div",we,[f(e("input",{class:"form-check-input",type:"radio",name:"credit",id:"'credit'",value:"信用卡","onUpdate:modelValue":s[4]||(s[4]=o=>x(t)?t.value=o:t=o)},null,512),[[g,c(t)]]),Ve])]),e("li",Ce,[e("div",Ue,[f(e("input",{class:"form-check-input",type:"radio",name:"bank",id:"'bank'",value:"銀行轉帳","onUpdate:modelValue":s[5]||(s[5]=o=>x(t)?t.value=o:t=o)},null,512),[[g,c(t)]]),De])]),e("li",je,[e("div",Oe,[f(e("input",{class:"form-check-input",type:"radio",name:"cashOnDelivery",id:"'cashOnDelivery'",value:"貨到付款","onUpdate:modelValue":s[6]||(s[6]=o=>x(t)?t.value=o:t=o)},null,512),[[g,c(t)]]),Te])])]),c(t)=="信用卡"?(m(),_("div",Ee,Ae)):k("",!0),c(t)=="銀行轉帳"?(m(),_("div",Me,Fe)):k("",!0)])]),Ne,e("div",Re,[e("div",Be,[e("button",Le,r(c(u)||"選擇配送方式"),1),e("ul",Pe,[e("li",null,[e("div",$e,[f(e("input",{class:"form-check-input",type:"radio",name:"home",id:"'home'",value:"宅配","onUpdate:modelValue":s[7]||(s[7]=o=>x(u)?u.value=o:u=o)},null,512),[[g,c(u)]]),Ie])])]),c(u)=="宅配"?(m(),_("div",He,Ge)):k("",!0)])]),Je,e("div",Ke,[e("div",Qe,[f(e("textarea",{name:"",id:"comment",class:"form-control",cols:"30",rows:"2","onUpdate:modelValue":s[8]||(s[8]=o=>l.value.message=o)},null,512),[[R,l.value.message]])])]),e("div",We,[a(h,{to:"/check/order_cart",class:"btn btn-secondary me-md-5 me-0"},{default:y(()=>[w("修改訂單")]),_:1}),Xe])]),_:1},512)])])}}};export{so as default};
